<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lista de Usuarios</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <a class="navbar-brand" href="index.html">FACT-3000</a>
  <div class="collapse navbar-collapse">
    <ul class="navbar-nav">
      <li class="nav-item"><a class="nav-link" href="formulario_usuario.html">Agregar Usuario</a></li>
    </ul>
  </div>
</nav>

<div class="container mt-4">
  <h2>Lista de Usuarios</h2>
  <table class="table table-bordered">
    <thead class="thead-dark">
      <tr>
        <th>#</th>
        <th>Nombre del Usuario</th>
        <th>ID de Usuario</th>
        <th>N° de Identificación</th>
        <th>Rol o Perfil</th>
        <th>Correo Electrónico</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody id="listaUsuarios"></tbody>
  </table>
</div>

<script>
  // Crear usuarios de ejemplo si no existen
  if (!localStorage.getItem("usuarios")) {
    const usuariosIniciales = [
      {id:"1", nombre:"Santiago Alvarez", identificacion:"1098765432", rol:"Administrador", correo:"santiago@email.com"},
      {id:"2", nombre:"Maria Perez", identificacion:"1023456789", rol:"Usuario", correo:"maria@email.com"}
    ];
    localStorage.setItem("usuarios", JSON.stringify(usuariosIniciales));
  }

  function cargarUsuarios() {
    const usuarios = JSON.parse(localStorage.getItem("usuarios")) || [];
    const lista = document.getElementById("listaUsuarios");
    lista.innerHTML = "";

    usuarios.forEach((u, i) => {
      lista.innerHTML += `
        <tr>
          <td>${i+1}</td>
          <td>${u.nombre}</td>
          <td>${u.id}</td>
          <td>${u.identificacion}</td>
          <td>${u.rol}</td>
          <td>${u.correo}</td>
          <td>
            <button class="btn btn-info btn-sm" onclick="verUsuario('${u.id}')">Ver</button>
            <button class="btn btn-warning btn-sm" onclick="editarUsuario('${u.id}')">Editar</button>
            <button class="btn btn-danger btn-sm" onclick="eliminarUsuario('${u.id}')">Eliminar</button>
          </td>
        </tr>
      `;
    });
  }

  function verUsuario(id) {
    // Redirige a la página de ver usuario pasando el id
    window.location.href = `ver_usuarios.html?id=${id}`;
  }

  function editarUsuario(id) {
    window.location.href = `formulario_usuario.html?id=${id}`;
  }

  function eliminarUsuario(id) {
    let usuarios = JSON.parse(localStorage.getItem("usuarios")) || [];
    usuarios = usuarios.filter(u => u.id !== id);
    localStorage.setItem("usuarios", JSON.stringify(usuarios));
    cargarUsuarios();
  }

  document.addEventListener("DOMContentLoaded", cargarUsuarios);
</script>
</body>
</html>

